const folderContainer = document.querySelector(".folder-container");
document.querySelector(".create-folder").addEventListener("click", () => {
  let e = Date.now(),
    t = document.createElement("div");
  (t.className =
    "flex flex-col items-center p-4 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors cursor-pointer folder"),
    (t.id = e),
    (t.innerHTML = `
  <div class="text-blue-400 text-4xl mb-2">📁</div>
  <input
      type="text"
      class="folder-name bg-gray-700 text-white px-2 py-1 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500 w-full max-w-[90%]"
      placeholder="Enter name"
      maxlength="15"
  /> `),
    folderContainer.appendChild(t);
  let r = t.querySelector("input");
  r.focus(),
    r.addEventListener("blur", () => {
      let e = r.value.trim();
      if ("" === e) t.remove();
      else {
        let l = document.createElement("span");
        (l.className =
          "folder-name text-white text-center w-full overflow-hidden text-ellipsis"),
          (l.textContent = e),
          r.replaceWith(l);
      }
    }),
    r.addEventListener("keypress", (e) => {
      "Enter" === e.key && r.blur();
    });
}),
  document.querySelector(".sort-by-name").addEventListener("click", () => {
    let e = Array.from(document.querySelectorAll(".folder"));
    e.sort((e, t) => {
      let r = e.querySelector(".folder-name").textContent.toLowerCase(),
        l = t.querySelector(".folder-name").textContent.toLowerCase();
      return r.localeCompare(l);
    }),
      e.forEach((e) => folderContainer.appendChild(e));
  }),
  document.querySelector(".sort-by-date").addEventListener("click", () => {
    let e = Array.from(document.querySelectorAll(".folder"));
    e.sort((e, t) => Number(e.id) - Number(t.id)),
      e.forEach((e) => folderContainer.appendChild(e));
  });
