const music = [
  {
    title: "Trendsetter",
    artist: "Mood Maze",
    src: "./music/trendsetter.mp3",
    cover: "./covers/Mood-Maze.jpg",
  },
  {
    title: "Night In Kyoto",
    artist: "Avbe",
    src: "./music/night-in-kyoto.mp3",
    cover: "./covers/Avbe.jpg",
  },
  {
    title: "Seize The Day",
    artist: "Andrew Rossi",
    src: "./music/seize-the-day.mp3",
    cover: "./covers/Andrey-Rossi.jpg",
  },
];
let currentMusic = 0;
const cover = document.getElementById("cover"),
  songTitle = document.getElementById("song-title"),
  artist = document.getElementById("artist"),
  audio = document.getElementById("audio"),
  seekBar = document.getElementById("seek-bar"),
  currentTime = document.getElementById("current-time"),
  totalTime = document.getElementById("total-time"),
  prevBtn = document.getElementById("prev"),
  playPauseBtn = document.getElementById("play-pause"),
  nextBtn = document.getElementById("next");
playPauseBtn.addEventListener("click", () => {
  audio.paused
    ? (audio.play(),
      playPauseBtn.querySelector("i").classList.replace("fa-play", "fa-pause"))
    : (audio.pause(),
      playPauseBtn.querySelector("i").classList.replace("fa-pause", "fa-play"));
}),
  nextBtn.addEventListener("click", () => {
    loadMusic((currentMusic = (currentMusic + 1) % music.length)),
      audio.play(),
      playPauseBtn.querySelector("i").classList.replace("fa-play", "fa-pause");
  }),
  prevBtn.addEventListener("click", () => {
    loadMusic(
      (currentMusic = 0 === currentMusic ? music.length - 1 : currentMusic - 1)
    ),
      audio.play(),
      playPauseBtn.querySelector("i").classList.replace("fa-play", "fa-pause");
  });
const loadMusic = (e) => {
  (cover.src = music[e].cover),
    (songTitle.textContent = music[e].title),
    (artist.textContent = music[e].artist),
    (audio.src = music[e].src),
    (seekBar.value = 0);
};
loadMusic(currentMusic),
  audio.addEventListener("loadedmetadata", () => {
    totalTime.textContent = time(audio.duration);
  }),
  audio.addEventListener("timeupdate", () => {
    audio.duration &&
      ((seekBar.value = (audio.currentTime / audio.duration) * 100),
      (currentTime.textContent = time(audio.currentTime)));
  }),
  seekBar.addEventListener("input", () => {
    audio.duration &&
      (audio.currentTime = (seekBar.value / 100) * audio.duration);
  });
const time = (e) => {
  let t = Math.floor(e % 60);
  return `${Math.floor(e / 60)}:${t < 10 ? "0" + t : t}`;
};
